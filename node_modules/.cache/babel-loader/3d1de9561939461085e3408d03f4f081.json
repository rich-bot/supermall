{"remainingRequest":"F:\\project\\vue\\supermall\\node_modules\\babel-loader\\lib\\index.js!F:\\project\\vue\\supermall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\project\\vue\\supermall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\project\\vue\\supermall\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\project\\vue\\supermall\\src\\views\\home\\Home.vue","mtime":1597497192841},{"path":"F:\\project\\vue\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596725900621},{"path":"F:\\project\\vue\\supermall\\node_modules\\babel-loader\\lib\\index.js","mtime":1596725931667},{"path":"F:\\project\\vue\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596725900621},{"path":"F:\\project\\vue\\supermall\\node_modules\\vue-loader\\lib\\index.js","mtime":1596725926567}],"contextDependencies":[],"result":["import _toConsumableArray from \"F:\\\\project\\\\vue\\\\supermall\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BackToTop from '@/components/content/backToTop/BackToTop.vue';\nimport Scroll from \"@/components/common/scroll/Scroll.vue\";\nimport GoodsList from '@/components/content/goods/GoodsList.vue';\nimport TabControl from '@/components/content/tabControl/TabControl.vue';\nimport FeatureView from '@/views/home/childHome/FeatureView.vue';\nimport NavBar from '@/components/common/navbar/NavBar.vue';\nimport Banners from '@/components/common/banners/Banners.vue';\nimport RecommendView from '@/views/home/childHome/RecommendView.vue';\nimport { getHomeMultidata as _getHomeMultidata, getHomeGoods as _getHomeGoods } from '@/network/home.js';\nexport default {\n  name: \"Home\",\n  components: {\n    NavBar: NavBar,\n    Banners: Banners,\n    RecommendView: RecommendView,\n    FeatureView: FeatureView,\n    TabControl: TabControl,\n    GoodsList: GoodsList,\n    Scroll: Scroll,\n    BackToTop: BackToTop\n  },\n  data: function data() {\n    return {\n      banners: [],\n      recommend: [],\n      goods: {\n        'pop': {\n          page: 0,\n          list: []\n        },\n        'new': {\n          page: 0,\n          list: []\n        },\n        'sell': {\n          page: 0,\n          list: []\n        }\n      },\n      currentIndex: 'pop',\n      isShow: true\n    };\n  },\n  mounted: function mounted() {\n    /* console.log(this.$bus); */\n    this.getHomeMultidata();\n    this.getHomeGoods('pop');\n    this.getHomeGoods('new');\n    this.getHomeGoods('sell');\n    var refresh = this.bounce(this.$refs.scroll.refresh);\n    this.$bus.$on(\"loadImg\", function () {\n      /* this.$refs.scroll.refresh(); */\n      refresh();\n      /* console.log(\"cccc\"); */\n    });\n  },\n  created: function created() {},\n  methods: {\n    //防抖函数\n    bounce: function bounce(fn) {\n      var timer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n      var timers = null;\n      return function () {\n        timers && clearTimeout(timers);\n        timers = setTimeout(function () {\n          fn.apply(this);\n        }, timer);\n      };\n    },\n    pullingUp: function pullingUp() {\n      /* console.log(\"________\"); */\n\n      /* console.log(\"------\"); */\n      this.getHomeGoods(this.currentIndex);\n      this.$refs.scroll.scroll.refresh();\n    },\n    scroll: function scroll(position) {\n      /* console.log(-position.y) */\n      if (-position.y > 1000) {\n        this.isShow = true;\n      } else {\n        this.isShow = false;\n      }\n    },\n    backTop: function backTop() {\n      /* console.log(\"ccccc\"); */\n\n      /* console.log(this.$refs.scroll.scroll) */\n      this.$refs.scroll.scrollTo(0, 0, 300);\n    },\n    changeIndex: function changeIndex(index) {\n      switch (index) {\n        case 0:\n          this.currentIndex = 'pop';\n          break;\n\n        case 1:\n          this.currentIndex = 'new';\n          break;\n\n        case 2:\n          this.currentIndex = 'sell';\n          break;\n      }\n    },\n\n    /* 网络请求 */\n    getHomeMultidata: function getHomeMultidata() {\n      var _this = this;\n\n      _getHomeMultidata().then(function (res) {\n        console.log(res.data.banner);\n        _this.banners = res.data.banner.list;\n        _this.recommend = res.data.recommend.list;\n      });\n    },\n    getHomeGoods: function getHomeGoods(type) {\n      var _this2 = this;\n\n      var page = this.goods[type].page + 1;\n\n      _getHomeGoods(type, page).then(function (res) {\n        var _this2$goods$type$lis;\n\n        console.log(res);\n\n        (_this2$goods$type$lis = _this2.goods[type].list).push.apply(_this2$goods$type$lis, _toConsumableArray(res.data.list));\n\n        _this2.goods[type].page += 1;\n\n        _this2.$refs.scroll.finishPullUp();\n      });\n      /* console.log(this.$refs.scroll); */\n\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA,OAAA,SAAA,MAAA,8CAAA;AACA,OAAA,MAAA,MAAA,uCAAA;AACA,OAAA,SAAA,MAAA,0CAAA;AACA,OAAA,UAAA,MAAA,gDAAA;AACA,OAAA,WAAA,MAAA,wCAAA;AACA,OAAA,MAAA,MAAA,uCAAA;AACA,OAAA,OAAA,MAAA,yCAAA;AACA,OAAA,aAAA,MAAA,0CAAA;AACA,SAAA,gBAAA,IAAA,iBAAA,EAAA,YAAA,IAAA,aAAA,QAAA,mBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,aAAA,EAAA,aAHA;AAIA,IAAA,WAAA,EAAA,WAJA;AAKA,IAAA,UAAA,EAAA,UALA;AAMA,IAAA,SAAA,EAAA,SANA;AAOA,IAAA,MAAA,EAAA,MAPA;AAQA,IAAA,SAAA,EAAA;AARA,GAFA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA;AACA,eAAA;AAAA,UAAA,IAAA,EAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SADA;AAEA,eAAA;AAAA,UAAA,IAAA,EAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAFA;AAGA,gBAAA;AAAA,UAAA,IAAA,EAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA;AAHA,OAHA;AAQA,MAAA,YAAA,EAAA,KARA;AASA,MAAA,MAAA,EAAA;AATA,KAAA;AAWA,GAxBA;AAyBA,EAAA,OAzBA,qBAyBA;AACA;AACA,SAAA,gBAAA;AACA,SAAA,YAAA,CAAA,KAAA;AACA,SAAA,YAAA,CAAA,KAAA;AACA,SAAA,YAAA,CAAA,MAAA;AAEA,QAAA,OAAA,GAAA,KAAA,MAAA,CAAA,KAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,SAAA,EAAA,YAAA;AACA;AACA,MAAA,OAAA;AACA;AACA,KAJA;AAMA,GAvCA;AAwCA,EAAA,OAxCA,qBAwCA,CAGA,CA3CA;AA4CA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,MAFA,kBAEA,EAFA,EAEA;AAAA,UAAA,KAAA,uEAAA,GAAA;AACA,UAAA,MAAA,GAAA,IAAA;AACA,aAAA,YAAA;AACA,QAAA,MAAA,IAAA,YAAA,CAAA,MAAA,CAAA;AACA,QAAA,MAAA,GAAA,UAAA,CAAA,YAAA;AACA,UAAA,EAAA,CAAA,KAAA,CAAA,IAAA;AAEA,SAHA,EAGA,KAHA,CAAA;AAIA,OANA;AAOA,KAXA;AAYA,IAAA,SAZA,uBAYA;AACA;;AACA;AACA,WAAA,YAAA,CAAA,KAAA,YAAA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,OAAA;AACA,KAjBA;AAkBA,IAAA,MAlBA,kBAkBA,QAlBA,EAkBA;AACA;AACA,UAAA,CAAA,QAAA,CAAA,CAAA,GAAA,IAAA,EAAA;AACA,aAAA,MAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,MAAA,GAAA,KAAA;AACA;AACA,KAzBA;AA0BA,IAAA,OA1BA,qBA0BA;AACA;;AACA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CAAA,EAAA,CAAA,EAAA,GAAA;AACA,KA9BA;AA+BA,IAAA,WA/BA,uBA+BA,KA/BA,EA+BA;AACA,cAAA,KAAA;AACA,aAAA,CAAA;AACA,eAAA,YAAA,GAAA,KAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,YAAA,GAAA,KAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,YAAA,GAAA,MAAA;AACA;AATA;AAWA,KA3CA;;AA4CA;AACA,IAAA,gBA7CA,8BA6CA;AAAA;;AACA,MAAA,iBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,IAAA;AAEA,OALA;AAMA,KApDA;AAqDA,IAAA,YArDA,wBAqDA,IArDA,EAqDA;AAAA;;AACA,UAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,EAAA,IAAA,GAAA,CAAA;;AACA,MAAA,aAAA,CAAA,IAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AAAA;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,iCAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,iDAAA,GAAA,CAAA,IAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,IAAA,IAAA,CAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA;AACA,OALA;AAMA;;AAEA;AA/DA;AA5CA,CAAA","sourcesContent":["<template>\n  <div id=\"home\">\r\n\t  <nav-bar class=\"home-nav\">\r\n\t\t  <div slot=\"center\">购物街</div> \r\n\t  </nav-bar>\r\n\t  <scroll class=\"content\" ref=\"scroll\" @scroll=\"scroll\" :isScroll=\"3\" @pullingUp=\"pullingUp\" :isReflsh=\"true\">\r\n\t\t <banners :banners=\"banners\"></banners>\r\n\t\t <RecommendView :recommend=\"recommend\"></RecommendView>  \r\n\t\t <FeatureView></FeatureView>\r\n\t\t <van-sticky :offset-top=\"44\" class=\"sticky\">\r\n\t\t   <tab-control :title=\"['流行','新款','精选']\" class=\"tab-control\" @changeIndex=\"changeIndex\"></tab-control>\r\n\t\t </van-sticky>\r\n\t\t <goods-list :list=\"goods[currentIndex].list\" class=\"good-list\"></goods-list> \r\n\t  </scroll>\r\n\t  <backToTop @click.native=\"backTop\" v-show=\"isShow\"></backToTop>\r\n  </div>\n</template>\n\n<script>\r\n  import BackToTop from '@/components/content/backToTop/BackToTop.vue'\r\n  import Scroll from \"@/components/common/scroll/Scroll.vue\"\r\n  import GoodsList from '@/components/content/goods/GoodsList.vue'\r\n  import TabControl from '@/components/content/tabControl/TabControl.vue'\r\n  import FeatureView from '@/views/home/childHome/FeatureView.vue'\r\n  import NavBar from '@/components/common/navbar/NavBar.vue'\r\n  import Banners from '@/components/common/banners/Banners.vue'\r\n  import RecommendView from '@/views/home/childHome/RecommendView.vue'\r\n  import {getHomeMultidata,getHomeGoods}\tfrom '@/network/home.js'\n  export default {\n    name: \"Home\",\r\n\tcomponents:{\r\n\t\tNavBar,\r\n\t\tBanners,\r\n\t\tRecommendView,\r\n\t\tFeatureView,\r\n\t\tTabControl,\r\n\t\tGoodsList,\r\n\t\tScroll,\r\n\t\tBackToTop\r\n\t},\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tbanners:[],\r\n\t\t\trecommend:[],\r\n\t\t\tgoods:{\r\n\t\t\t\t'pop':{page:0,list:[]},\r\n\t\t\t\t'new':{page:0,list:[]},\r\n\t\t\t\t'sell':{page:0,list:[]},\r\n\t\t\t},\r\n\t\t\tcurrentIndex:'pop',\r\n\t\t\tisShow:true\r\n\t\t}\r\n\t},\r\n\tmounted(){\r\n\t\t/* console.log(this.$bus); */\r\n\t\tthis.getHomeMultidata();\r\n\t\tthis.getHomeGoods('pop');\r\n\t\tthis.getHomeGoods('new');\r\n\t\tthis.getHomeGoods('sell');\r\n\t\t\r\n\t\tconst refresh=this.bounce(this.$refs.scroll.refresh);\r\n\t\tthis.$bus.$on(\"loadImg\",()=>{\r\n\t\t\t/* this.$refs.scroll.refresh(); */\r\n\t\t\trefresh();\r\n\t\t\t/* console.log(\"cccc\"); */\r\n\t\t})\r\n\t\t\r\n\t},\r\n\tcreated() {\r\n\t\t\r\n\t\t\r\n\t},\r\n\tmethods:{\r\n\t\t//防抖函数\r\n\t\tbounce(fn,timer=300){\r\n\t\t\tlet timers=null;\r\n\t\t\treturn function(){\r\n\t\t\t\ttimers&&clearTimeout(timers);\r\n\t\t\t\ttimers=setTimeout(function(){\r\n\t\t\t\t\tfn.apply(this);\r\n\t\t\t\t\t\r\n\t\t\t\t},timer)\r\n\t\t\t}\r\n\t\t},\r\n\t\tpullingUp(){\r\n\t\t\t/* console.log(\"________\"); */\r\n\t\t\t/* console.log(\"------\"); */\r\n\t\t\tthis.getHomeGoods(this.currentIndex);\r\n\t\t\tthis.$refs.scroll.scroll.refresh();\r\n\t\t},\r\n\t\tscroll(position){\r\n\t\t\t/* console.log(-position.y) */\r\n\t\t\tif(-position.y>1000){\r\n\t\t\t\tthis.isShow=true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.isShow=false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbackTop(){\r\n\t\t\t/* console.log(\"ccccc\"); */\r\n\t\t\t/* console.log(this.$refs.scroll.scroll) */\r\n\t\t\tthis.$refs.scroll.scrollTo(0,0,300);\r\n\t\t},\r\n\t\tchangeIndex(index){\r\n\t\t\tswitch(index){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t      this.currentIndex='pop';\r\n\t\t\t\t\t  break;\r\n\t\t\t    case 1:\r\n\t\t\t\t      this.currentIndex='new';\r\n\t\t\t\t\t  break;\r\n\t\t\t    case 2:\r\n\t\t\t\t      this.currentIndex='sell';\r\n\t\t\t\t\t  break;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/* 网络请求 */\r\n\t\tgetHomeMultidata(){\r\n\t\t\tgetHomeMultidata().then(res=>{\r\n\t\t\t\tconsole.log(res.data.banner);\r\n\t\t\t\tthis.banners=res.data.banner.list;\r\n\t\t\t\tthis.recommend=res.data.recommend.list;\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t},\r\n\t\tgetHomeGoods(type){\r\n\t\t\tlet page=this.goods[type].page+1;\r\n\t\t\tgetHomeGoods(type,page).then(res=>{\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tthis.goods[type].list.push(...res.data.list);\r\n\t\t\t\tthis.goods[type].page+=1;\r\n\t\t\t\tthis.$refs.scroll.finishPullUp();\r\n\t\t\t})\r\n\t\t\t/* console.log(this.$refs.scroll); */\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\n  }\n</script>\n\n<style scoped>\r\n\t\r\n\t#home{\r\n\t\twidth: 100%;\r\n\t\t/* margin-top: 44px; */\r\n\t\theight: 100vh;\r\n\t\t/* padding-bottom: 1000px; */\r\n\t\tposition: relative;\r\n\t}\r\n\t/* #home::before{\r\n\t\tdisplay: block;\r\n\t\tcontent: \"\";\r\n\t\toverflow: hidden;\r\n\t} */\r\n     .tab-control{\r\n\t\t background-color: #fff;\r\n\t }\r\n/* \t.good-list{\r\n\t\tposition: relative;\r\n\t\tz-index: 999;\r\n\t} */\n  .home-nav{\r\n\t  /* width: 100%; */\r\n\t  background-color: var(--color-tint);\r\n\t  color: #FFF;\r\n\t  position: fixed;\r\n\t  top: 0;\r\n\t  left: 0;\r\n\t  right: 0;\r\n\t  z-index: 9;\r\n  }\r\n  .content{\r\n\t  /* height: 300px; */\r\n\t  position: absolute;\r\n\t  top: 44px;\r\n\t  /* top:0; */\r\n\t  bottom: 49px;\r\n\t  left: 0;\r\n\t  right: 0;\r\n\t  /* overflow: hidden; */\r\n  }\r\n/*  .tab-control{\r\n\t  position: -webkit-sticky;\r\n\t  top: 44px;\r\n  } */\n</style>\n"],"sourceRoot":"src/views/home"}]}